<!-- Modal de confirmaciÃ³n de eliminaciÃ³n -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" 
     @click.self="$el.remove()">
    <div class="bg-white rounded-xl shadow-2xl max-w-md w-full">
        <!-- Header -->
        <div class="bg-red-500 text-white px-6 py-4 rounded-t-xl">
            <h3 class="text-xl font-bold">âš ï¸ Confirmar EliminaciÃ³n</h3>
        </div>
        
        <!-- Content -->
        <div class="p-6">
            <p class="text-gray-700 mb-2">
                Â¿EstÃ¡s seguro que deseas eliminar este servicio?
            </p>
            <div class="bg-gray-50 p-4 rounded-lg mb-6">
                <p class="font-bold text-gray-900">{{ service.icon }} {{ service.name }}</p>
                <p class="text-sm text-gray-600">{{ service.description|truncatewords:15 }}</p>
            </div>
            <p class="text-sm text-red-600 font-semibold">
                Esta acciÃ³n no se puede deshacer.
            </p>
        </div>
        
        <!-- Buttons -->
        <div class="flex gap-3 px-6 pb-6">
            <form method="post" 
                  hx-post="{% url 'delete_service' service.id %}"
                  hx-target="#service-{{ service.id }}"
                  hx-swap="outerHTML"
                  class="flex-1">
                {% csrf_token %}
                <button type="submit" 
                        class="w-full px-6 py-3 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition">
                    ğŸ—‘ï¸ SÃ­, Eliminar
                </button>
            </form>
            <button type="button"
                    @click="$el.closest('.fixed').remove()"
                    class="flex-1 px-6 py-3 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition">
                Cancelar
            </button>
        </div>
    </div>
</div>

<script>
    // Mostrar notificaciÃ³n despuÃ©s de eliminar
    document.body.addEventListener('htmx:afterSwap', function(evt) {
        if (!evt.detail.target.innerHTML.trim()) {
            window.showToast('ğŸ—‘ï¸ Servicio eliminado correctamente', 'success');
            const modal = document.querySelector('.fixed.inset-0');
            if (modal) modal.remove();
        }
    });
</script>